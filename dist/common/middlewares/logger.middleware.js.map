{"version":3,"sources":["../../../src/common/middlewares/logger.middleware.ts"],"sourcesContent":["// NestJS\r\nimport { Injectable, Logger } from '@nestjs/common';\r\n\r\n// Types\r\nimport type { NestMiddleware } from '@nestjs/common';\r\nimport type { FastifyReply, FastifyRequest } from 'fastify';\r\n\r\n/**\r\n * Logger middleware\r\n * @description This middleware logs request details to the console when a request is made\r\n */\r\n@Injectable()\r\nexport class LoggerMiddleware implements NestMiddleware {\r\n  constructor(private readonly logger: Logger) {}\r\n\r\n  public use(req: FastifyRequest, res: FastifyReply, next: () => void) {\r\n    const formattedDate = this.formatDate(new Date());\r\n    const methodColor = this.getMethodColor(req.method);\r\n    const fullUrl = `${req.originalUrl}`;\r\n\r\n    this.logger.log(`${this.lightBlue(`[${formattedDate}]`)} ${methodColor(req.method)} ${this.brightCyan(fullUrl)}`);\r\n\r\n    next();\r\n  }\r\n\r\n  private formatDate(date: Date): string {\r\n    const hours: number = date.getHours();\r\n    const minutes: number = date.getMinutes();\r\n    const ampm: 'AM' | 'PM' = hours >= 12 ? 'PM' : 'AM';\r\n    const formattedHours: number = hours % 12 || 12;\r\n    const formattedMinutes: string = minutes.toString().padStart(2, '0');\r\n\r\n    return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date\r\n      .getDate()\r\n      .toString()\r\n      .padStart(2, '0')} ${formattedHours}:${formattedMinutes} ${ampm}`;\r\n  }\r\n\r\n  private getMethodColor(method: string): (text: string) => string {\r\n    switch (method.toUpperCase()) {\r\n      case 'GET':\r\n        return this.green;\r\n      case 'POST':\r\n        return this.blue;\r\n      case 'PUT':\r\n        return this.yellow;\r\n      case 'DELETE':\r\n        return this.red;\r\n      case 'PATCH':\r\n        return this.magenta;\r\n      case 'OPTIONS':\r\n        return this.cyan;\r\n      case 'HEAD':\r\n        return this.gray;\r\n      default:\r\n        return this.white;\r\n    }\r\n  }\r\n\r\n  private gray(text: string): string {\r\n    return `\\x1b[90m${text}\\x1b[0m`;\r\n  }\r\n\r\n  private green(text: string): string {\r\n    return `\\x1b[32m${text}\\x1b[0m`;\r\n  }\r\n\r\n  private blue(text: string): string {\r\n    return `\\x1b[34m${text}\\x1b[0m`;\r\n  }\r\n\r\n  private lightBlue(text: string): string {\r\n    return `\\x1b[94m${text}\\x1b[0m`;\r\n  }\r\n\r\n  private yellow(text: string): string {\r\n    return `\\x1b[33m${text}\\x1b[0m`;\r\n  }\r\n\r\n  private red(text: string): string {\r\n    return `\\x1b[31m${text}\\x1b[0m`;\r\n  }\r\n\r\n  private cyan(text: string): string {\r\n    return `\\x1b[36m${text}\\x1b[0m`;\r\n  }\r\n\r\n  private brightCyan(text: string): string {\r\n    return `\\x1b[96m${text}\\x1b[0m`;\r\n  }\r\n\r\n  private magenta(text: string): string {\r\n    return `\\x1b[35m${text}\\x1b[0m`;\r\n  }\r\n\r\n  private white(text: string): string {\r\n    return `\\x1b[37m${text}\\x1b[0m`;\r\n  }\r\n}\r\n"],"names":["LoggerMiddleware","constructor","logger","use","req","res","next","formattedDate","formatDate","Date","methodColor","getMethodColor","method","fullUrl","originalUrl","log","lightBlue","brightCyan","date","hours","getHours","minutes","getMinutes","ampm","formattedHours","formattedMinutes","toString","padStart","getFullYear","getMonth","getDate","toUpperCase","green","blue","yellow","red","magenta","cyan","gray","white","text"],"mappings":"AAAA,SAAS;;;;;+BAYIA;;;eAAAA;;;wBAXsB;;;;;;;;;;AAW5B,IAAA,AAAMA,mBAAN,MAAMA;IACXC,YAAY,AAAiBC,MAAc,CAAE;aAAhBA,SAAAA;IAAiB;IAEvCC,IAAIC,GAAmB,EAAEC,GAAiB,EAAEC,IAAgB,EAAE;QACnE,MAAMC,gBAAgB,IAAI,CAACC,UAAU,CAAC,IAAIC;QAC1C,MAAMC,cAAc,IAAI,CAACC,cAAc,CAACP,IAAIQ,MAAM;QAClD,MAAMC,UAAU,GAAGT,IAAIU,WAAW,EAAE;QAEpC,IAAI,CAACZ,MAAM,CAACa,GAAG,CAAC,GAAG,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC,EAAET,cAAc,CAAC,CAAC,EAAE,CAAC,EAAEG,YAAYN,IAAIQ,MAAM,EAAE,CAAC,EAAE,IAAI,CAACK,UAAU,CAACJ,UAAU;QAEhHP;IACF;IAEQE,WAAWU,IAAU,EAAU;QACrC,MAAMC,QAAgBD,KAAKE,QAAQ;QACnC,MAAMC,UAAkBH,KAAKI,UAAU;QACvC,MAAMC,OAAoBJ,SAAS,KAAK,OAAO;QAC/C,MAAMK,iBAAyBL,QAAQ,MAAM;QAC7C,MAAMM,mBAA2BJ,QAAQK,QAAQ,GAAGC,QAAQ,CAAC,GAAG;QAEhE,OAAO,GAAGT,KAAKU,WAAW,GAAG,CAAC,EAAE,AAACV,CAAAA,KAAKW,QAAQ,KAAK,CAAA,EAAGH,QAAQ,GAAGC,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAET,KAClFY,OAAO,GACPJ,QAAQ,GACRC,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAEH,eAAe,CAAC,EAAEC,iBAAiB,CAAC,EAAEF,MAAM;IACrE;IAEQZ,eAAeC,MAAc,EAA4B;QAC/D,OAAQA,OAAOmB,WAAW;YACxB,KAAK;gBACH,OAAO,IAAI,CAACC,KAAK;YACnB,KAAK;gBACH,OAAO,IAAI,CAACC,IAAI;YAClB,KAAK;gBACH,OAAO,IAAI,CAACC,MAAM;YACpB,KAAK;gBACH,OAAO,IAAI,CAACC,GAAG;YACjB,KAAK;gBACH,OAAO,IAAI,CAACC,OAAO;YACrB,KAAK;gBACH,OAAO,IAAI,CAACC,IAAI;YAClB,KAAK;gBACH,OAAO,IAAI,CAACC,IAAI;YAClB;gBACE,OAAO,IAAI,CAACC,KAAK;QACrB;IACF;IAEQD,KAAKE,IAAY,EAAU;QACjC,OAAO,CAAC,QAAQ,EAAEA,KAAK,OAAO,CAAC;IACjC;IAEQR,MAAMQ,IAAY,EAAU;QAClC,OAAO,CAAC,QAAQ,EAAEA,KAAK,OAAO,CAAC;IACjC;IAEQP,KAAKO,IAAY,EAAU;QACjC,OAAO,CAAC,QAAQ,EAAEA,KAAK,OAAO,CAAC;IACjC;IAEQxB,UAAUwB,IAAY,EAAU;QACtC,OAAO,CAAC,QAAQ,EAAEA,KAAK,OAAO,CAAC;IACjC;IAEQN,OAAOM,IAAY,EAAU;QACnC,OAAO,CAAC,QAAQ,EAAEA,KAAK,OAAO,CAAC;IACjC;IAEQL,IAAIK,IAAY,EAAU;QAChC,OAAO,CAAC,QAAQ,EAAEA,KAAK,OAAO,CAAC;IACjC;IAEQH,KAAKG,IAAY,EAAU;QACjC,OAAO,CAAC,QAAQ,EAAEA,KAAK,OAAO,CAAC;IACjC;IAEQvB,WAAWuB,IAAY,EAAU;QACvC,OAAO,CAAC,QAAQ,EAAEA,KAAK,OAAO,CAAC;IACjC;IAEQJ,QAAQI,IAAY,EAAU;QACpC,OAAO,CAAC,QAAQ,EAAEA,KAAK,OAAO,CAAC;IACjC;IAEQD,MAAMC,IAAY,EAAU;QAClC,OAAO,CAAC,QAAQ,EAAEA,KAAK,OAAO,CAAC;IACjC;AACF"}