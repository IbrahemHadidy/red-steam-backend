{"version":3,"sources":["../../../../src/modules/apis/company/publisher.controller.ts"],"sourcesContent":["// NestJS\r\nimport {\r\n  Body,\r\n  Controller,\r\n  Delete,\r\n  Get,\r\n  HttpCode,\r\n  Param,\r\n  ParseArrayPipe,\r\n  ParseIntPipe,\r\n  Post,\r\n  Put,\r\n  Query,\r\n  UseGuards,\r\n} from '@nestjs/common';\r\n\r\n// Decorators\r\nimport { Serialize } from '@decorators/serialize.decorator';\r\n\r\n// Swagger\r\nimport { ApiDescriptor } from '@decorators/api-descriptor.decorator';\r\nimport { ApiTags } from '@nestjs/swagger';\r\n\r\n// Pipes\r\nimport { ParseJsonPipe } from '@pipes/parse-json.pipe';\r\nimport { UnionTypeValidationPipe } from '@pipes/union-type-validation.pipe';\r\n\r\n// Guards\r\nimport { AdminGuard } from '@guards/admin.guard';\r\nimport { JwtAccessAuthGuard } from '@guards/jwt-access-auth.guard';\r\n\r\n// Services\r\nimport { CompanyService } from '@apis/company/company.service';\r\n\r\n// Body DTOs\r\nimport { CreatePublisherDto } from '@apis/company/dtos/create-publisher.dto';\r\nimport { UpdatePublisherDto } from '@apis/company/dtos/update-publisher.dto';\r\n\r\n// Query DTOs\r\nimport { PublisherQueryDto } from '@apis/company/dtos/publisher-search-query.dto';\r\n\r\n// Serializer DTOs\r\nimport { CompanyDto } from '@apis/company/serializer-dtos/company.dto';\r\nimport { PaginatedCompaniesDataDto } from '@apis/company/serializer-dtos/paginated-companies-data.dto';\r\n\r\n// Swagger descriptors\r\nimport { createPublisherDescriptor } from '@apis/company/api-descriptors/create-publisher.descriptor';\r\nimport { deletePublisherDescriptor } from '@apis/company/api-descriptors/delete-publisher.descriptor';\r\nimport { getAllPublishersDescriptor } from '@apis/company/api-descriptors/get-all-publishers.descriptor';\r\nimport { getPublishersPaginatedDescriptor } from '@apis/company/api-descriptors/get-publishers-paginated.descriptor';\r\nimport { getPublishersDescriptor } from '@apis/company/api-descriptors/get-publishers.descriptor';\r\nimport { updatePublisherDescriptor } from '@apis/company/api-descriptors/update-publisher.descriptor';\r\n\r\n@ApiTags('Publisher')\r\n@Controller('publisher')\r\nexport class PublisherController {\r\n  constructor(private readonly companyService: CompanyService) {}\r\n\r\n  @ApiDescriptor(createPublisherDescriptor)\r\n  @UseGuards(JwtAccessAuthGuard, AdminGuard)\r\n  @Post()\r\n  @HttpCode(201)\r\n  async createPublisher(@Body() body: CreatePublisherDto) {\r\n    const result = await this.companyService.createPublisher(body);\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n\r\n  @ApiDescriptor(getPublishersDescriptor)\r\n  @Serialize(CompanyDto)\r\n  @Get(':id')\r\n  @HttpCode(200)\r\n  async getPublisher(@Param('id', ParseIntPipe) id: number) {\r\n    const result = await this.companyService.getPublisher(id);\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n\r\n  @ApiDescriptor(getPublishersDescriptor)\r\n  @Serialize(CompanyDto)\r\n  @Get('bulk/:ids')\r\n  @HttpCode(200)\r\n  async getPublishers(@Param('ids', new ParseArrayPipe({ items: Number })) ids: number[]) {\r\n    const result = await this.companyService.getPublishers(ids);\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n\r\n  @ApiDescriptor(getAllPublishersDescriptor)\r\n  @Serialize(CompanyDto)\r\n  @Get()\r\n  @HttpCode(200)\r\n  async getAllPublishers() {\r\n    const result = await this.companyService.getAllPublishers();\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n\r\n  @ApiDescriptor(getPublishersPaginatedDescriptor)\r\n  @Serialize(PaginatedCompaniesDataDto)\r\n  @Get('paginated')\r\n  @HttpCode(200)\r\n  async getPublishersPaginated(\r\n    @Query('page', ParseIntPipe) page: number,\r\n    @Query('limit', ParseIntPipe) limit: number,\r\n    @Query('orderBy', new UnionTypeValidationPipe(['id', 'name', 'website']))\r\n    orderBy: 'id' | 'name' | 'website',\r\n    @Query('order', new UnionTypeValidationPipe(['ASC', 'DESC'])) order: 'ASC' | 'DESC',\r\n    @Query('searchQuery', new ParseJsonPipe(PublisherQueryDto, { optional: true, validate: true }))\r\n    searchQuery: PublisherQueryDto = {},\r\n  ) {\r\n    const result = await this.companyService.getPublishersPaginated(page, limit, orderBy, order, searchQuery);\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n\r\n  @ApiDescriptor(updatePublisherDescriptor)\r\n  @UseGuards(JwtAccessAuthGuard, AdminGuard)\r\n  @Put(':id')\r\n  @HttpCode(200)\r\n  async updatePublisher(@Param('id', ParseIntPipe) id: number, @Body() body: UpdatePublisherDto) {\r\n    const result = await this.companyService.updatePublisher(id, body);\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n\r\n  @ApiDescriptor(deletePublisherDescriptor)\r\n  @UseGuards(JwtAccessAuthGuard, AdminGuard)\r\n  @Delete(':id')\r\n  @HttpCode(200)\r\n  async deletePublisher(@Param('id', ParseIntPipe) id: number) {\r\n    const result = await this.companyService.deletePublisher(id);\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n}\r\n"],"names":["PublisherController","constructor","companyService","createPublisher","body","result","getPublisher","id","getPublishers","ids","getAllPublishers","getPublishersPaginated","page","limit","orderBy","order","searchQuery","updatePublisher","deletePublisher","ParseArrayPipe","items","Number","UnionTypeValidationPipe","ParseJsonPipe","PublisherQueryDto","optional","validate"],"mappings":"AAAA,SAAS;;;;;+BAuDIA;;;eAAAA;;;wBAzCN;oCAGmB;wCAGI;yBACN;+BAGM;yCACU;4BAGb;oCACQ;gCAGJ;oCAGI;oCACA;yCAGD;4BAGP;2CACe;2CAGA;2CACA;4CACC;kDACM;yCACT;2CACE;;;;;;;;;;;;;;;AAInC,IAAA,AAAMA,sBAAN,MAAMA;IACXC,YAAY,AAAiBC,cAA8B,CAAE;aAAhCA,iBAAAA;IAAiC;IAE9D,MAIMC,gBAAgB,AAAQC,IAAwB,EAAE;QACtD,MAAMC,SAAS,MAAM,IAAI,CAACH,cAAc,CAACC,eAAe,CAACC;QAEzD,oBAAoB;QACpB,OAAOC;IACT;IAEA,MAIMC,aAAa,AAA2BC,EAAU,EAAE;QACxD,MAAMF,SAAS,MAAM,IAAI,CAACH,cAAc,CAACI,YAAY,CAACC;QAEtD,oBAAoB;QACpB,OAAOF;IACT;IAEA,MAIMG,cAAc,AAAqDC,GAAa,EAAE;QACtF,MAAMJ,SAAS,MAAM,IAAI,CAACH,cAAc,CAACM,aAAa,CAACC;QAEvD,oBAAoB;QACpB,OAAOJ;IACT;IAEA,MAIMK,mBAAmB;QACvB,MAAML,SAAS,MAAM,IAAI,CAACH,cAAc,CAACQ,gBAAgB;QAEzD,oBAAoB;QACpB,OAAOL;IACT;IAEA,MAIMM,uBACJ,AAA6BC,IAAY,EACzC,AAA8BC,KAAa,EAC3C,AACAC,OAAkC,EAClC,AAA8DC,KAAqB,EACnF,AACAC,cAAiC,CAAC,CAAC,EACnC;QACA,MAAMX,SAAS,MAAM,IAAI,CAACH,cAAc,CAACS,sBAAsB,CAACC,MAAMC,OAAOC,SAASC,OAAOC;QAE7F,oBAAoB;QACpB,OAAOX;IACT;IAEA,MAIMY,gBAAgB,AAA2BV,EAAU,EAAE,AAAQH,IAAwB,EAAE;QAC7F,MAAMC,SAAS,MAAM,IAAI,CAACH,cAAc,CAACe,eAAe,CAACV,IAAIH;QAE7D,oBAAoB;QACpB,OAAOC;IACT;IAEA,MAIMa,gBAAgB,AAA2BX,EAAU,EAAE;QAC3D,MAAMF,SAAS,MAAM,IAAI,CAACH,cAAc,CAACgB,eAAe,CAACX;QAEzD,oBAAoB;QACpB,OAAOF;IACT;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+CA1DwCc,sBAAc,CAAC;QAAEC,OAAOC;IAAO;;;;;;;;;;;;;;;;;;;;;;;mDAyB7CC,gDAAuB,CAAC;QAAC;QAAM;QAAQ;KAAU;iDAEnDA,gDAAuB,CAAC;QAAC;QAAO;KAAO;uDACjCC,4BAAa,CAACC,0CAAiB,EAAE;QAAEC,UAAU;QAAMC,UAAU;IAAK"}