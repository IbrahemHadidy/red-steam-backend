{"version":3,"sources":["../../../../src/modules/apis/feature/feature.controller.ts"],"sourcesContent":["// NestJS\r\nimport {\r\n  Body,\r\n  Controller,\r\n  Delete,\r\n  Get,\r\n  HttpCode,\r\n  Param,\r\n  ParseArrayPipe,\r\n  ParseIntPipe,\r\n  Post,\r\n  Put,\r\n  Query,\r\n  UseGuards,\r\n} from '@nestjs/common';\r\n\r\n// Decorators\r\nimport { Serialize } from '@decorators/serialize.decorator';\r\n\r\n// Swagger\r\nimport { ApiDescriptor } from '@decorators/api-descriptor.decorator';\r\nimport { ApiTags } from '@nestjs/swagger';\r\n\r\n// Pipes\r\nimport { ParseJsonPipe } from '@pipes/parse-json.pipe';\r\nimport { UnionTypeValidationPipe } from '@pipes/union-type-validation.pipe';\r\n\r\n// Guards\r\nimport { AdminGuard } from '@guards/admin.guard';\r\nimport { JwtAccessAuthGuard } from '@guards/jwt-access-auth.guard';\r\n\r\n// Services\r\nimport { FeatureService } from '@apis/feature/feature.service';\r\n\r\n// Body DTOs\r\nimport { CreateFeatureDto } from '@apis/feature/dtos/create-feature.dto';\r\nimport { UpdateFeatureDto } from '@apis/feature/dtos/update-feature.dto';\r\n\r\n// Query DTOs\r\nimport { FeatureQueryDto } from '@apis/feature/dtos/feature-search-query.dto';\r\n\r\n// Serializer DTOs\r\nimport { FeatureDto } from '@apis/feature/serializer-dtos/feature.dto';\r\nimport { PaginatedFeaturesDataDto } from '@apis/feature/serializer-dtos/paginated-features-data.dto';\r\n\r\n// Swagger descriptors\r\nimport { createFeatureDescriptor } from '@apis/feature/api-descriptors/create-feature.descriptor';\r\nimport { deleteFeatureDescriptor } from '@apis/feature/api-descriptors/delete-feature.descriptor';\r\nimport { getAllFeaturesDescriptor } from '@apis/feature/api-descriptors/get-all-features.descriptor';\r\nimport { getFeatureDescriptor } from '@apis/feature/api-descriptors/get-feature.descriptor';\r\nimport { getFeaturesPaginatedDescriptor } from '@apis/feature/api-descriptors/get-features-paginated.descriptor';\r\nimport { getFeaturesDescriptor } from '@apis/feature/api-descriptors/get-features.descriptor';\r\nimport { updateFeatureDescriptor } from '@apis/feature/api-descriptors/update-feature.descriptor';\r\n\r\n@ApiTags('Feature')\r\n@Controller('feature')\r\nexport class FeatureController {\r\n  constructor(private readonly featureService: FeatureService) {}\r\n\r\n  @ApiDescriptor(createFeatureDescriptor)\r\n  @UseGuards(JwtAccessAuthGuard, AdminGuard)\r\n  @Post()\r\n  @HttpCode(201)\r\n  async createTag(@Body() body: CreateFeatureDto) {\r\n    const result = await this.featureService.createFeature(body);\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n\r\n  @ApiDescriptor(getFeatureDescriptor)\r\n  @Serialize(FeatureDto)\r\n  @Get(':id')\r\n  @HttpCode(200)\r\n  async getFeature(@Param('id', ParseIntPipe) id: number) {\r\n    const result = await this.featureService.getFeature(id);\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n\r\n  @ApiDescriptor(getFeaturesDescriptor)\r\n  @Serialize(FeatureDto)\r\n  @Get('bulk/:ids')\r\n  @HttpCode(200)\r\n  async getFeatures(@Param('ids', new ParseArrayPipe({ items: Number })) ids: number[]) {\r\n    const result = await this.featureService.getFeatures(ids);\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n\r\n  @ApiDescriptor(getAllFeaturesDescriptor)\r\n  @Serialize(FeatureDto)\r\n  @Get()\r\n  @HttpCode(200)\r\n  async getAllFeatures() {\r\n    const result = await this.featureService.getAllFeatures();\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n\r\n  @ApiDescriptor(getFeaturesPaginatedDescriptor)\r\n  @Serialize(PaginatedFeaturesDataDto)\r\n  @Get('paginated')\r\n  @HttpCode(200)\r\n  async getFeaturesPaginated(\r\n    @Query('page', ParseIntPipe) page: number,\r\n    @Query('limit', ParseIntPipe) limit: number,\r\n    @Query('orderBy', new UnionTypeValidationPipe(['id', 'name'])) orderBy: 'id' | 'name',\r\n    @Query('order', new UnionTypeValidationPipe(['ASC', 'DESC'])) order: 'ASC' | 'DESC',\r\n    @Query('searchQuery', new ParseJsonPipe(FeatureQueryDto, { optional: true, validate: true }))\r\n    searchQuery: FeatureQueryDto = {},\r\n  ) {\r\n    const result = await this.featureService.getFeaturesPaginated(page, limit, orderBy, order, searchQuery);\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n\r\n  @ApiDescriptor(updateFeatureDescriptor)\r\n  @UseGuards(JwtAccessAuthGuard, AdminGuard)\r\n  @Put(':id')\r\n  @HttpCode(200)\r\n  async updateFeature(@Param('id', ParseIntPipe) id: number, @Body() body: UpdateFeatureDto) {\r\n    const result = await this.featureService.updateFeature(id, body);\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n\r\n  @ApiDescriptor(deleteFeatureDescriptor)\r\n  @UseGuards(JwtAccessAuthGuard, AdminGuard)\r\n  @Delete(':id')\r\n  @HttpCode(200)\r\n  async deleteFeature(@Param('id', ParseIntPipe) id: number) {\r\n    const result = await this.featureService.deleteFeature(id);\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n}\r\n"],"names":["FeatureController","constructor","featureService","createTag","body","result","createFeature","getFeature","id","getFeatures","ids","getAllFeatures","getFeaturesPaginated","page","limit","orderBy","order","searchQuery","updateFeature","deleteFeature","ParseArrayPipe","items","Number","UnionTypeValidationPipe","ParseJsonPipe","FeatureQueryDto","optional","validate"],"mappings":"AAAA,SAAS;;;;;+BAwDIA;;;eAAAA;;;wBA1CN;oCAGmB;wCAGI;yBACN;+BAGM;yCACU;4BAGb;oCACQ;gCAGJ;kCAGE;kCACA;uCAGD;4BAGL;0CACc;yCAGD;yCACA;0CACC;sCACJ;gDACU;uCACT;yCACE;;;;;;;;;;;;;;;AAIjC,IAAA,AAAMA,oBAAN,MAAMA;IACXC,YAAY,AAAiBC,cAA8B,CAAE;aAAhCA,iBAAAA;IAAiC;IAE9D,MAIMC,UAAU,AAAQC,IAAsB,EAAE;QAC9C,MAAMC,SAAS,MAAM,IAAI,CAACH,cAAc,CAACI,aAAa,CAACF;QAEvD,oBAAoB;QACpB,OAAOC;IACT;IAEA,MAIME,WAAW,AAA2BC,EAAU,EAAE;QACtD,MAAMH,SAAS,MAAM,IAAI,CAACH,cAAc,CAACK,UAAU,CAACC;QAEpD,oBAAoB;QACpB,OAAOH;IACT;IAEA,MAIMI,YAAY,AAAqDC,GAAa,EAAE;QACpF,MAAML,SAAS,MAAM,IAAI,CAACH,cAAc,CAACO,WAAW,CAACC;QAErD,oBAAoB;QACpB,OAAOL;IACT;IAEA,MAIMM,iBAAiB;QACrB,MAAMN,SAAS,MAAM,IAAI,CAACH,cAAc,CAACS,cAAc;QAEvD,oBAAoB;QACpB,OAAON;IACT;IAEA,MAIMO,qBACJ,AAA6BC,IAAY,EACzC,AAA8BC,KAAa,EAC3C,AAA+DC,OAAsB,EACrF,AAA8DC,KAAqB,EACnF,AACAC,cAA+B,CAAC,CAAC,EACjC;QACA,MAAMZ,SAAS,MAAM,IAAI,CAACH,cAAc,CAACU,oBAAoB,CAACC,MAAMC,OAAOC,SAASC,OAAOC;QAE3F,oBAAoB;QACpB,OAAOZ;IACT;IAEA,MAIMa,cAAc,AAA2BV,EAAU,EAAE,AAAQJ,IAAsB,EAAE;QACzF,MAAMC,SAAS,MAAM,IAAI,CAACH,cAAc,CAACgB,aAAa,CAACV,IAAIJ;QAE3D,oBAAoB;QACpB,OAAOC;IACT;IAEA,MAIMc,cAAc,AAA2BX,EAAU,EAAE;QACzD,MAAMH,SAAS,MAAM,IAAI,CAACH,cAAc,CAACiB,aAAa,CAACX;QAEvD,oBAAoB;QACpB,OAAOH;IACT;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+CAzDsCe,sBAAc,CAAC;QAAEC,OAAOC;IAAO;;;;;;;;;;;;;;;;;;;;;;;mDAyB3CC,gDAAuB,CAAC;QAAC;QAAM;KAAO;iDACxCA,gDAAuB,CAAC;QAAC;QAAO;KAAO;uDACjCC,4BAAa,CAACC,sCAAe,EAAE;QAAEC,UAAU;QAAMC,UAAU;IAAK"}