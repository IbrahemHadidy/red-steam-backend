{"version":3,"sources":["../../../../src/modules/apis/tag/tag.controller.ts"],"sourcesContent":["// NestJS\r\nimport {\r\n  Body,\r\n  Controller,\r\n  Delete,\r\n  Get,\r\n  HttpCode,\r\n  Param,\r\n  ParseArrayPipe,\r\n  ParseIntPipe,\r\n  Post,\r\n  Put,\r\n  Query,\r\n  UseGuards,\r\n} from '@nestjs/common';\r\n\r\n// Decorators\r\nimport { Serialize } from '@decorators/serialize.decorator';\r\n\r\n// Swagger\r\nimport { ApiDescriptor } from '@decorators/api-descriptor.decorator';\r\nimport { ApiTags } from '@nestjs/swagger';\r\n\r\n// Pipes\r\nimport { ParseJsonPipe } from '@pipes/parse-json.pipe';\r\nimport { UnionTypeValidationPipe } from '@pipes/union-type-validation.pipe';\r\n\r\n// Guards\r\nimport { AdminGuard } from '@guards/admin.guard';\r\nimport { JwtAccessAuthGuard } from '@guards/jwt-access-auth.guard';\r\n\r\n// Services\r\nimport { TagService } from '@apis/tag/tag.service';\r\n\r\n// Body DTOs\r\nimport { CreateTagDto } from '@apis/tag/dtos/create-tag.dto';\r\nimport { UpdateTagDto } from '@apis/tag/dtos/update-tag.dto';\r\n\r\n// Query DTOs\r\nimport { TagQueryDto } from '@apis/tag/dtos/tag-search-query.dto';\r\n\r\n// Serializer DTOs\r\nimport { PaginatedTagsDataDto } from '@apis/tag/serializer-dtos/paginated-tags-data.dto';\r\nimport { TagDto } from '@apis/tag/serializer-dtos/tag.dto';\r\n\r\n// Swagger descriptors\r\nimport { createTagDescriptor } from '@apis/tag/api-descriptors/create-tag.descriptor';\r\nimport { deleteTagDescriptor } from '@apis/tag/api-descriptors/delete-tag.descriptor';\r\nimport { getAllTagsDescriptor } from '@apis/tag/api-descriptors/get-all-tags.descriptor';\r\nimport { getTagDescriptor } from '@apis/tag/api-descriptors/get-tag.descriptor';\r\nimport { getTagsPaginatedDescriptor } from '@apis/tag/api-descriptors/get-tags-paginated.descriptor';\r\nimport { getTagsDescriptor } from '@apis/tag/api-descriptors/get-tags.descriptor';\r\nimport { updateTagDescriptor } from '@apis/tag/api-descriptors/update-tag.descriptor';\r\n\r\n@ApiTags('Tag')\r\n@Controller('tag')\r\nexport class TagController {\r\n  constructor(private readonly tagService: TagService) {}\r\n\r\n  @ApiDescriptor(createTagDescriptor)\r\n  @UseGuards(JwtAccessAuthGuard, AdminGuard)\r\n  @Post()\r\n  @HttpCode(201)\r\n  async createTag(@Body() body: CreateTagDto) {\r\n    const result = await this.tagService.createTag(body);\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n\r\n  @ApiDescriptor(getTagDescriptor)\r\n  @Serialize(TagDto)\r\n  @Get(':id')\r\n  @HttpCode(200)\r\n  async getTag(@Param('id', ParseIntPipe) id: number) {\r\n    const result = await this.tagService.getTag(id);\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n\r\n  @ApiDescriptor(getTagsDescriptor)\r\n  @Serialize(TagDto)\r\n  @Get('bulk/:ids')\r\n  @HttpCode(200)\r\n  async getTags(@Param('ids', new ParseArrayPipe({ items: Number })) ids: number[]) {\r\n    const result = await this.tagService.getTags(ids);\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n\r\n  @ApiDescriptor(getAllTagsDescriptor)\r\n  @Serialize(TagDto)\r\n  @Get()\r\n  @HttpCode(200)\r\n  async getAllTags() {\r\n    const result = await this.tagService.getAllTags();\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n\r\n  @ApiDescriptor(getTagsPaginatedDescriptor)\r\n  @Serialize(PaginatedTagsDataDto)\r\n  @Get('paginated')\r\n  @HttpCode(200)\r\n  async getTagsPaginated(\r\n    @Query('page', ParseIntPipe) page: number,\r\n    @Query('limit', ParseIntPipe) limit: number,\r\n    @Query('orderBy', new UnionTypeValidationPipe(['id', 'name'])) orderBy: 'id' | 'name',\r\n    @Query('order', new UnionTypeValidationPipe(['ASC', 'DESC'])) order: 'ASC' | 'DESC',\r\n    @Query('searchQuery', new ParseJsonPipe(TagQueryDto, { optional: true, validate: true }))\r\n    searchQuery: TagQueryDto = {},\r\n  ) {\r\n    const result = await this.tagService.getTagsPaginated(page, limit, orderBy, order, searchQuery);\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n\r\n  @ApiDescriptor(updateTagDescriptor)\r\n  @UseGuards(JwtAccessAuthGuard, AdminGuard)\r\n  @Put(':id')\r\n  @HttpCode(200)\r\n  async updateTag(@Param('id', ParseIntPipe) id: number, @Body() body: UpdateTagDto) {\r\n    const result = await this.tagService.updateTag(id, body);\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n\r\n  @ApiDescriptor(deleteTagDescriptor)\r\n  @UseGuards(JwtAccessAuthGuard, AdminGuard)\r\n  @Delete(':id')\r\n  @HttpCode(200)\r\n  async deleteTag(@Param('id', ParseIntPipe) id: number) {\r\n    const result = await this.tagService.deleteTag(id);\r\n\r\n    // Send the response\r\n    return result;\r\n  }\r\n}\r\n"],"names":["TagController","constructor","tagService","createTag","body","result","getTag","id","getTags","ids","getAllTags","getTagsPaginated","page","limit","orderBy","order","searchQuery","updateTag","deleteTag","ParseArrayPipe","items","Number","UnionTypeValidationPipe","ParseJsonPipe","TagQueryDto","optional","validate"],"mappings":"AAAA,SAAS;;;;;+BAwDIA;;;eAAAA;;;wBA1CN;oCAGmB;wCAGI;yBACN;+BAGM;yCACU;4BAGb;oCACQ;4BAGR;8BAGE;8BACA;mCAGD;sCAGS;wBACd;qCAGa;qCACA;sCACC;kCACJ;4CACU;mCACT;qCACE;;;;;;;;;;;;;;;AAI7B,IAAA,AAAMA,gBAAN,MAAMA;IACXC,YAAY,AAAiBC,UAAsB,CAAE;aAAxBA,aAAAA;IAAyB;IAEtD,MAIMC,UAAU,AAAQC,IAAkB,EAAE;QAC1C,MAAMC,SAAS,MAAM,IAAI,CAACH,UAAU,CAACC,SAAS,CAACC;QAE/C,oBAAoB;QACpB,OAAOC;IACT;IAEA,MAIMC,OAAO,AAA2BC,EAAU,EAAE;QAClD,MAAMF,SAAS,MAAM,IAAI,CAACH,UAAU,CAACI,MAAM,CAACC;QAE5C,oBAAoB;QACpB,OAAOF;IACT;IAEA,MAIMG,QAAQ,AAAqDC,GAAa,EAAE;QAChF,MAAMJ,SAAS,MAAM,IAAI,CAACH,UAAU,CAACM,OAAO,CAACC;QAE7C,oBAAoB;QACpB,OAAOJ;IACT;IAEA,MAIMK,aAAa;QACjB,MAAML,SAAS,MAAM,IAAI,CAACH,UAAU,CAACQ,UAAU;QAE/C,oBAAoB;QACpB,OAAOL;IACT;IAEA,MAIMM,iBACJ,AAA6BC,IAAY,EACzC,AAA8BC,KAAa,EAC3C,AAA+DC,OAAsB,EACrF,AAA8DC,KAAqB,EACnF,AACAC,cAA2B,CAAC,CAAC,EAC7B;QACA,MAAMX,SAAS,MAAM,IAAI,CAACH,UAAU,CAACS,gBAAgB,CAACC,MAAMC,OAAOC,SAASC,OAAOC;QAEnF,oBAAoB;QACpB,OAAOX;IACT;IAEA,MAIMY,UAAU,AAA2BV,EAAU,EAAE,AAAQH,IAAkB,EAAE;QACjF,MAAMC,SAAS,MAAM,IAAI,CAACH,UAAU,CAACe,SAAS,CAACV,IAAIH;QAEnD,oBAAoB;QACpB,OAAOC;IACT;IAEA,MAIMa,UAAU,AAA2BX,EAAU,EAAE;QACrD,MAAMF,SAAS,MAAM,IAAI,CAACH,UAAU,CAACgB,SAAS,CAACX;QAE/C,oBAAoB;QACpB,OAAOF;IACT;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+CAzDkCc,sBAAc,CAAC;QAAEC,OAAOC;IAAO;;;;;;;;;;;;;;;;;;;;;;;mDAyBvCC,gDAAuB,CAAC;QAAC;QAAM;KAAO;iDACxCA,gDAAuB,CAAC;QAAC;QAAO;KAAO;uDACjCC,4BAAa,CAACC,8BAAW,EAAE;QAAEC,UAAU;QAAMC,UAAU;IAAK"}